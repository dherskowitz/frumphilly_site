{% extends 'base.html' %}
{% load webpack_static from webpack_loader %}

{% block meta_title %}{{event.name}} | Frum Philly{% endblock meta_title %}
{% block meta_description %}{{event.name}}{% endblock meta_description %}

{% block opengraph %}
    <meta property="og:title" content="{{event.name}} | Frum Philly" />
    <meta property="og:description" content="Check out {{event.name}} on Frum Philly" />
    <meta property="og:image" content="{{event.image.url}}">
    <meta property="og:type" content="article" />
    <meta property="og:url" content="http://frumphilly.com{{event.get_absolute_url}}" />

    <!-- Twitter -->
    <meta name="twitter:card" content="summary" />
    <meta name="twitter:site" content="http://frumphilly.com/" />
    <meta name="twitter:title" content="{{event.name}} | Frum Philly" />
    <meta name="twitter:description" content="Check out {{event.name}} on Frum Philly" />
    <meta name="twitter:image" content="{{event.image.url}}" />
{% endblock opengraph %}

{% block main %}


<div class="container md:flex justify-between my-6" x-data="{ 'showReportPostModal': false }" @keydown.escape="showReportPostModal = false">
    <div id="left" class="md:w-3/4 md:mr-6">
        {% comment %} Title {% endcomment %}
        <div class="mb-4">
            <h1 class="text-3xl md:text-5xl text-center text-white text-shadow">{{event.name}}</h1>
        </div>
        <div class="mb-4">
            {% for category in event.categories.all %}
            <a class="bg-gray-600 text-white rounded-md shadow-md px-4 py-2" href="/events/?categories={{ category.title }}">{{ category.title }}</a>
            {% endfor %}
        </div>
        {% comment %} Infobar {% endcomment %}
        <div class="grid grid-cols-3 lg:grid-cols-5 gap-6 flex-wrap text-center bg-white p-3 rounded-sm shadow-sm mb-4">
            <span class="flex flex-col justify-center items-center">
                <svg class="" width="24" height="24" stroke-width="1.5" stroke="#607D8B" fill="none" stroke-linecap="round" stroke-linejoin="round">
                    <path d="M0 0h24v24H0z" stroke="none" />
                    <rect x="4" y="5" width="16" height="16" rx="2" />
                    <path d="M16 3v4M8 3v4M4 11h16M8 15h2v2H8z" /></svg>
                <span class="icon__text">{{event.start_date}}</span>
            </span>

            {% if event.start_time %}
            <span class="flex flex-col justify-center items-center">
                <svg class="" width="24" height="24" stroke-width="1.5" stroke="#607D8B" fill="none" stroke-linecap="round" stroke-linejoin="round">
                    <path d="M0 0h24v24H0z" stroke="none" />
                    <circle cx="12" cy="13" r="7" />
                    <path d="M12 10v3h2M7 4L4.25 6M17 4l2.75 2" /></svg>
                <span class="icon__text">{{event.start_time|time:"H:i A"}}</span>
            </span>
            {% endif %}

            {% if event.link %}
            <a class="flex flex-col justify-center items-center" href="{{event.link}}" target="_blank" rel="noreferrer">
                <svg class="icon icon-tabler icon-tabler-external-link" width="24" height="24" stroke-width="1.5" stroke="#607D8B" fill="none" stroke-linecap="round" stroke-linejoin="round">
                    <path d="M0 0h24v24H0z" stroke="none" />
                    <path d="M11 7H6a2 2 0 00-2 2v9a2 2 0 002 2h9a2 2 0 002-2v-5M10 14L20 4M15 4h5v5" /></svg>
                <span class="icon__text">Event Website</span>
            </a>
            {% endif %}

            <a class="flex flex-col justify-center items-center" href="https://www.google.com/maps?q={{event.location}}" target="_blank" rel="noreferrer">
                <svg class="icon icon-tabler icon-tabler-map-pin" width="24" height="24" stroke-width="1.5" stroke="#607D8B" fill="none" stroke-linecap="round" stroke-linejoin="round">
                    <path d="M0 0h24v24H0z" stroke="none" />
                    <circle cx="12" cy="11" r="3" />
                    <path d="M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z" /></svg>
                <span class="icon__text">See Map</span>
            </a>
            <span class="flex flex-col justify-center items-center">
                {% if event.rsvp %}
                <svg class="" width="24" height="24" stroke-width="1.5" stroke="#607D8B" fill="none" stroke-linecap="round" stroke-linejoin="round">
                    <path d="M0 0h24v24H0z" stroke="none" />
                    <path d="M9 12l2 2 4-4" />
                    <path d="M12 3a12 12 0 008.5 3A12 12 0 0112 21 12 12 0 013.5 6 12 12 0 0012 3" /></svg>
                {% else %}
                <svg class="" width="24" height="24" stroke-width="1.5" stroke="#607D8B" fill="none" stroke-linecap="round" stroke-linejoin="round">
                    <path d="M0 0h24v24H0z" stroke="none" />
                    <path d="M12 3a12 12 0 008.5 3A12 12 0 0112 21 12 12 0 013.5 6 12 12 0 0012 3M10 10l4 4m0-4l-4 4" /></svg>
                {% endif %}
                <span class="icon__text">RSVP Required</span>
            </span>

            <span class="flex flex-col justify-center items-center">
                <svg class="" width="24" height="24" stroke-width="1.5" stroke="#607D8B" fill="none" stroke-linecap="round" stroke-linejoin="round">
                    <path d="M0 0h24v24H0z" stroke="none" />
                    <rect x="7" y="9" width="14" height="10" rx="2" />
                    <circle cx="14" cy="14" r="2" />
                    <path d="M17 9V7a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2" /></svg>
                {% if event.cost %}
                <span class="icon__text">${{event.cost}}</span>
                {% else %}
                <span class="icon__text">Free</span>
                {% endif %}
            </span>

            {% if event.email_contact %}
            <a class="flex flex-col justify-center items-center" href="mailto:{{event.email_contact}}">
                <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-mail" width="24" height="24" viewBox="0 0 24 24" stroke-width="1.5" stroke="#607D8B" fill="none" stroke-linecap="round" stroke-linejoin="round">
                    <path stroke="none" d="M0 0h24v24H0z" />
                    <rect x="3" y="5" width="18" height="14" rx="2" />
                    <polyline points="3 7 12 13 21 7" />
                </svg>
                <span class="icon__text">Email Host</span>
            </a>
            {% endif %}

            {% if event.phone_contact %}
            <a class="flex flex-col justify-center items-center" href="tel:+{{event.phone_contact}}">
                <svg class="icon icon-tabler icon-tabler-phone-call" width="24" height="24" stroke-width="1.5" stroke="#607D8B" fill="none" stroke-linecap="round" stroke-linejoin="round">
                    <path d="M0 0h24v24H0z" stroke="none" />
                    <path d="M5 4h4l2 5-2.5 1.5a11 11 0 005 5L15 13l5 2v4a2 2 0 01-2 2A16 16 0 013 6a2 2 0 012-2M15 7a2 2 0 012 2M15 3a6 6 0 016 6" /></svg>
                <span class="icon__text">{{event.phone_contact}}</span>
            </a>
            {% endif %}

            {% if event.attachment %}
            <a class="flex flex-col justify-center items-center" href="#" onclick="window.open('{{event.attachment.url}}', '_blank'
                , 'location=yes,height=570,width=520,scrollbars=yes,status=yes' );">
                <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-file-invoice" width="24" height="24" viewBox="0 0 24 24" stroke-width="1.5" stroke="#607D8B" fill="none" stroke-linecap="round" stroke-linejoin="round">
                    <path stroke="none" d="M0 0h24v24H0z" />
                    <path d="M14 3v4a1 1 0 0 0 1 1h4" />
                    <path d="M17 21h-10a2 2 0 0 1 -2 -2v-14a2 2 0 0 1 2 -2h7l5 5v11a2 2 0 0 1 -2 2z" />
                    <line x1="9" y1="7" x2="10" y2="7" />
                    <line x1="9" y1="13" x2="15" y2="13" />
                    <line x1="13" y1="17" x2="15" y2="17" />
                </svg>
                <span class="icon__text">More Info</span>
            </a>
            {% endif %}
        </div>
        {% comment %} Main Content {% endcomment %}
        <div class="">
            {% if event.description %}
            <div class="editor-content bg-white p-3 rounded-sm shadow-sm mb-4">
                {{event.description|safe}}
            </div>
            {% endif %}

            {% if event.video %}
            <div class="bg-white p-3 rounded-sm shadow-sm mb-4">
                <iframe src="{{event.video}}" class="embed" frameborder="0" allowfullscreen></iframe>
            </div>
            {% endif %}

            {% if event.image %}
            <div class="bg-white p-3 rounded-sm shadow-sm mb-4 flex justify-center">
                <img width="400" height="600" src="{{event.image.url}}" alt="{{event.name}}">
            </div>
            {% endif %}
        </div>

        <div>
            <button class="text-sm p-2 bg-red-200 text-red-700 rounded-sm shadow-sm" type="button" @click="showReportPostModal = true">Report Event</button>
        </div>
    </div>
    <div id="right" class="pt-4 md:w-1/4">
        <div class="rightbar__box" style="border: 1px solid grey;height: 15rem;display: flex;justify-content: center;align-items: center;padding: 1rem;margin-bottom: 1rem;">
            Example. Your Ad Here.
        </div>
    </div>

    {% include 'components/report_post_modal.html' with form=report_post_form post_type="Event" post_id=event.id post_title=event.name %}
</div>
<div class="container">
    {% include 'components/events_cta.html' %}
</div>
{% endblock main %}

{% block template_js %}
<script>
    const links = document.querySelectorAll(".editor-content a");
    [...links].map(link => link.setAttribute('target', '_blank'));
</script>
{% endblock template_js %}
